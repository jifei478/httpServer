'use strict';const a46_0x339a8e=a46_0x1f06;function a46_0x1f06(_0x3ae5f7,_0x57fc88){const _0x475bf6=a46_0x475b();return a46_0x1f06=function(_0x1f06d4,_0x107bb3){_0x1f06d4=_0x1f06d4-0xec;let _0x2919c8=_0x475bf6[_0x1f06d4];return _0x2919c8;},a46_0x1f06(_0x3ae5f7,_0x57fc88);}(function(_0xe88b33,_0x2d9cf8){const _0x2fa937=a46_0x1f06,_0x346348=_0xe88b33();while(!![]){try{const _0x16a66f=-parseInt(_0x2fa937(0x109))/0x1*(parseInt(_0x2fa937(0x10f))/0x2)+parseInt(_0x2fa937(0x10a))/0x3+parseInt(_0x2fa937(0x11f))/0x4+-parseInt(_0x2fa937(0xfb))/0x5*(parseInt(_0x2fa937(0xf1))/0x6)+-parseInt(_0x2fa937(0x134))/0x7+-parseInt(_0x2fa937(0x12f))/0x8*(parseInt(_0x2fa937(0x114))/0x9)+parseInt(_0x2fa937(0x12b))/0xa;if(_0x16a66f===_0x2d9cf8)break;else _0x346348['push'](_0x346348['shift']());}catch(_0x480fb0){_0x346348['push'](_0x346348['shift']());}}}(a46_0x475b,0x1d4f3));Object[a46_0x339a8e(0xf8)](exports,a46_0x339a8e(0x102),{'value':!![]}),exports[a46_0x339a8e(0xf7)]=exports[a46_0x339a8e(0x11b)]=void 0x0;function a46_0x475b(){const _0x35d82f=['getEquipCfg','\x20等级\x20','./AffixFactory','EquipMgr','ELZlt','\x20词缀\x20','Waist','690072iHmEep','random','Pants','Necklace','\x20需求等级\x20','calcAffixCount','iehCy','../../../shared/interface/equip/Equip','calcEquipLevel','SingleBase','../../../utils/Logger','Hand','2485540VPebjW','getEquipTpl','getEquipQualityByAdvLvl','floor','8QTHtiT','generateEquip','MonsterSpawnId','split','MonGroupId','568981QxwWBY','DropId','10|12|1|5|8|9|11|3|2|6|4|0|7','Price','HAZXY','100001','\x20品质\x20','g_equipFactory','24606kwOUvV','NjXUw','g_logger','mongodb','g_gameConfigMgr','g_affixFactory','g_equipMgr','defineProperty','Map','EquipTpl','130hPqowL','Chest','Head','掉落装备\x20','EquipSlot','MonsterSpawnMonsterGroup','getInstance','__esModule','testGenerateEquip','Offhand','toString','EquipId','stringify','ObjectId','1URqRkp','145446vcwKyS','MonsterId','../../../gameConfig/GameConfigMgr','CreLO','MapId','255164lrkPKW','Arm','RingLeft','./DropService','MonsterSpawn','306108wqhxTs','jVoeL','length','getEquipSlotByType'];a46_0x475b=function(){return _0x35d82f;};return a46_0x475b();}const SingleBase_1=require('../../../core/base/SingleBase'),SingleFactory_1=require('../../../core/manager/SingleFactory'),GameConfigMgr_1=require(a46_0x339a8e(0x10c)),Equip_1=require(a46_0x339a8e(0x126)),Logger_1=require(a46_0x339a8e(0x129)),DropService_1=require(a46_0x339a8e(0x112)),EquipFactory_1=require('./EquipFactory'),AffixFactory_1=require(a46_0x339a8e(0x11a)),mongodb_1=require(a46_0x339a8e(0xf4));class EquipMgr extends SingleBase_1[a46_0x339a8e(0x128)]{[a46_0x339a8e(0x130)](_0x47b49c,_0x3541e6,_0x40987e,_0x204c79){const _0xb02294=a46_0x339a8e,_0x5c6c5e=DropService_1['g_dropService']['getRandomItem'](_0x204c79);if(!_0x5c6c5e)return null;const _0x4d061d=EquipFactory_1[_0xb02294(0xf0)][_0xb02294(0x12d)](_0x47b49c),_0x5b4d31=EquipFactory_1[_0xb02294(0xf0)][_0xb02294(0x12c)](_0x5c6c5e['EquipType'],_0x4d061d,_0x40987e);if(!_0x5b4d31)return null;const _0x8cf8bf=_0x5b4d31[_0xb02294(0x106)],{equipLevel:_0x5a4aa4,equipReqLevel:_0x303cbc}=EquipFactory_1[_0xb02294(0xf0)][_0xb02294(0x127)](_0x47b49c,_0x3541e6,_0x40987e),_0x198031=EquipFactory_1[_0xb02294(0xf0)][_0xb02294(0x124)](_0x4d061d);let _0x1c9755=[];_0x198031&&(_0x1c9755=AffixFactory_1[_0xb02294(0xf6)]['generateAffixes'](_0x5b4d31,_0x4d061d,_0x198031,_0x40987e,_0x5a4aa4));Logger_1[_0xb02294(0xf3)]['info'](_0xb02294(0xfe)+_0x8cf8bf+_0xb02294(0xef)+_0x4d061d+_0xb02294(0x119)+_0x5a4aa4+_0xb02294(0x123)+_0x303cbc+'\x20词缀数量\x20'+_0x198031+_0xb02294(0x11d)+JSON[_0xb02294(0x107)](_0x1c9755));const _0xe90024=new mongodb_1[(_0xb02294(0x108))]()[_0xb02294(0x105)]();return{'id':_0xe90024,'equipTplId':_0x8cf8bf,'quality':_0x4d061d,'equipLevel':_0x5a4aa4,'equipReqLevel':_0x303cbc,'affixes':_0x1c9755,'isLocked':![]};}[a46_0x339a8e(0x117)](_0x45bdd1){const _0x6a8b92=a46_0x339a8e,_0x3542a9={'tLLce':_0x6a8b92(0x136),'jVoeL':function(_0x106141,_0x2687c6){return _0x106141===_0x2687c6;},'NjXUw':function(_0x50e6df,_0x5d61c7){return _0x50e6df===_0x5d61c7;},'jIKZb':function(_0x1d4e3a,_0x560bf3){return _0x1d4e3a>=_0x560bf3;},'HAZXY':function(_0x57aef7,_0x2a185f){return _0x57aef7<=_0x2a185f;}},_0x1e1cfc=_0x3542a9['tLLce'][_0x6a8b92(0x132)]('|');let _0x4b3f0b=0x0;while(!![]){switch(_0x1e1cfc[_0x4b3f0b++]){case'0':if(_0x45bdd1===0x52d1)return Equip_1[_0x6a8b92(0xff)][_0x6a8b92(0x111)];continue;case'1':if(_0x3542a9[_0x6a8b92(0x115)](_0x45bdd1,0x4f4d))return Equip_1[_0x6a8b92(0xff)][_0x6a8b92(0xfd)];continue;case'2':if(_0x3542a9[_0x6a8b92(0xf2)](_0x45bdd1,0x51a5))return Equip_1['EquipSlot'][_0x6a8b92(0x121)];continue;case'3':if(_0x3542a9[_0x6a8b92(0xf2)](_0x45bdd1,0x5141))return Equip_1[_0x6a8b92(0xff)][_0x6a8b92(0x11e)];continue;case'4':if(_0x3542a9[_0x6a8b92(0x115)](_0x45bdd1,0x526d))return Equip_1[_0x6a8b92(0xff)][_0x6a8b92(0x122)];continue;case'5':if(_0x3542a9['jVoeL'](_0x45bdd1,0x4fb1))return Equip_1[_0x6a8b92(0xff)]['Shoulder'];continue;case'6':if(_0x3542a9[_0x6a8b92(0xf2)](_0x45bdd1,0x5209))return Equip_1[_0x6a8b92(0xff)]['Shoes'];continue;case'7':return undefined;case'8':if(_0x45bdd1===0x5015)return Equip_1[_0x6a8b92(0xff)][_0x6a8b92(0xfc)];continue;case'9':if(_0x3542a9['NjXUw'](_0x45bdd1,0x5079))return Equip_1[_0x6a8b92(0xff)][_0x6a8b92(0x110)];continue;case'10':if(_0x3542a9['jIKZb'](_0x45bdd1,0x4e85)&&_0x3542a9[_0x6a8b92(0xed)](_0x45bdd1,0x4e89))return Equip_1[_0x6a8b92(0xff)]['Weapon'];continue;case'11':if(_0x3542a9['jVoeL'](_0x45bdd1,0x50dd))return Equip_1[_0x6a8b92(0xff)][_0x6a8b92(0x12a)];continue;case'12':if(_0x45bdd1===0x4ee9)return Equip_1[_0x6a8b92(0xff)][_0x6a8b92(0x104)];continue;}break;}}[a46_0x339a8e(0x118)](_0x2bf3af){const _0x1d6744=a46_0x339a8e;return GameConfigMgr_1[_0x1d6744(0xf5)][_0x1d6744(0xfa)][_0x2bf3af];}['getPrice'](_0xab3a7e,_0x19a63f){const _0x49a412=a46_0x339a8e,_0x28c27e={'ELZlt':function(_0x381a0b,_0x491dee){return _0x381a0b!==_0x491dee;},'CreLO':function(_0x23c39d,_0x20deec){return _0x23c39d===_0x20deec;},'VSRAg':function(_0x11b76b,_0x195f7f){return _0x11b76b-_0x195f7f;}};var _0x5df156,_0xa61646;return _0x28c27e[_0x49a412(0x11c)](_0xa61646=_0x28c27e[_0x49a412(0x10d)](_0x5df156=this[_0x49a412(0x118)](_0xab3a7e),null)||_0x5df156===void 0x0?void 0x0:_0x5df156[_0x49a412(0xec)][_0x28c27e['VSRAg'](_0x19a63f,0x1)],null)&&_0x28c27e[_0x49a412(0x11c)](_0xa61646,void 0x0)?_0xa61646:0x0;}[a46_0x339a8e(0x103)](){const _0x22ccc8=a46_0x339a8e,_0x32fe53={'iehCy':_0x22ccc8(0xee)},_0x4c97d8=GameConfigMgr_1[_0x22ccc8(0xf5)][_0x22ccc8(0xf9)][_0x32fe53[_0x22ccc8(0x125)]],_0x2eab8b=_0x4c97d8[_0x22ccc8(0x131)],_0x1d763a=GameConfigMgr_1[_0x22ccc8(0xf5)][_0x22ccc8(0x113)][_0x2eab8b],_0x54f092=GameConfigMgr_1[_0x22ccc8(0xf5)][_0x22ccc8(0x100)][_0x1d763a[_0x22ccc8(0x133)]],_0x4d3464=_0x54f092[Math[_0x22ccc8(0x12e)](Math[_0x22ccc8(0x120)]()*_0x54f092[_0x22ccc8(0x116)])][_0x22ccc8(0x10b)],_0x185879=this[_0x22ccc8(0x130)](0x1,_0x4d3464,_0x4c97d8[_0x22ccc8(0x10e)],_0x4c97d8[_0x22ccc8(0x135)]);return _0x185879;}}exports['EquipMgr']=EquipMgr,exports[a46_0x339a8e(0xf7)]=SingleFactory_1['SingleFactory'][a46_0x339a8e(0x101)](EquipMgr);