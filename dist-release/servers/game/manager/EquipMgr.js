'use strict';const a46_0x168657=a46_0x7a42;function a46_0x7a42(_0x3e31b1,_0x431898){const _0x363f4d=a46_0x363f();return a46_0x7a42=function(_0x7a4291,_0x3cfdf8){_0x7a4291=_0x7a4291-0xf8;let _0x342a01=_0x363f4d[_0x7a4291];return _0x342a01;},a46_0x7a42(_0x3e31b1,_0x431898);}(function(_0x1959cb,_0x27d4af){const _0x2bc332=a46_0x7a42,_0x2b42fd=_0x1959cb();while(!![]){try{const _0xf64ff9=-parseInt(_0x2bc332(0x10d))/0x1*(-parseInt(_0x2bc332(0x112))/0x2)+-parseInt(_0x2bc332(0xf8))/0x3*(-parseInt(_0x2bc332(0x134))/0x4)+-parseInt(_0x2bc332(0x10b))/0x5+-parseInt(_0x2bc332(0x132))/0x6+parseInt(_0x2bc332(0x11f))/0x7+-parseInt(_0x2bc332(0x13f))/0x8*(-parseInt(_0x2bc332(0x135))/0x9)+parseInt(_0x2bc332(0x127))/0xa*(parseInt(_0x2bc332(0x101))/0xb);if(_0xf64ff9===_0x27d4af)break;else _0x2b42fd['push'](_0x2b42fd['shift']());}catch(_0xa979e7){_0x2b42fd['push'](_0x2b42fd['shift']());}}}(a46_0x363f,0x900f4));Object[a46_0x168657(0x124)](exports,a46_0x168657(0x11c),{'value':!![]}),exports[a46_0x168657(0x119)]=exports['EquipMgr']=void 0x0;const SingleBase_1=require(a46_0x168657(0x136)),SingleFactory_1=require(a46_0x168657(0x13c)),GameConfigMgr_1=require(a46_0x168657(0x114)),Equip_1=require(a46_0x168657(0x11e)),Logger_1=require('../../../utils/Logger'),DropService_1=require('./DropService'),EquipFactory_1=require('./EquipFactory'),AffixFactory_1=require(a46_0x168657(0x130)),mongodb_1=require(a46_0x168657(0x103));class EquipMgr extends SingleBase_1[a46_0x168657(0x142)]{[a46_0x168657(0xfc)](_0x559be0,_0xe386f1,_0x4a3ee1,_0x5678d7){const _0x4a9ac4=a46_0x168657,_0x4e2b90=DropService_1[_0x4a9ac4(0x107)][_0x4a9ac4(0x12c)](_0x5678d7);if(!_0x4e2b90)return null;const _0x1ede1b=EquipFactory_1['g_equipFactory'][_0x4a9ac4(0x125)](_0x559be0),_0x274f82=EquipFactory_1['g_equipFactory'][_0x4a9ac4(0x140)](_0x4e2b90[_0x4a9ac4(0x141)],_0x1ede1b,_0x4a3ee1);if(!_0x274f82)return null;const _0x2a9a1e=_0x274f82[_0x4a9ac4(0x128)],{equipLevel:_0x6ec1fd,equipReqLevel:_0x34958a}=EquipFactory_1[_0x4a9ac4(0x10e)][_0x4a9ac4(0x120)](_0x559be0,_0xe386f1,_0x4a3ee1),_0xd0f35=EquipFactory_1[_0x4a9ac4(0x10e)]['calcAffixCount'](_0x1ede1b);let _0xf26459=[];_0xd0f35&&(_0xf26459=AffixFactory_1[_0x4a9ac4(0xff)]['generateAffixes'](_0x274f82,_0x1ede1b,_0xd0f35,_0x4a3ee1,_0x6ec1fd));Logger_1[_0x4a9ac4(0xf9)][_0x4a9ac4(0x10f)]('掉落装备\x20'+_0x2a9a1e+'\x20品质\x20'+_0x1ede1b+_0x4a9ac4(0xfe)+_0x6ec1fd+_0x4a9ac4(0x115)+_0x34958a+_0x4a9ac4(0x137)+_0xd0f35+_0x4a9ac4(0x10a)+JSON[_0x4a9ac4(0x123)](_0xf26459));const _0x43869d=new mongodb_1[(_0x4a9ac4(0x11b))]()[_0x4a9ac4(0x12e)]();return{'id':_0x43869d,'equipTplId':_0x2a9a1e,'quality':_0x1ede1b,'equipLevel':_0x6ec1fd,'equipReqLevel':_0x34958a,'affixes':_0xf26459,'isLocked':![]};}[a46_0x168657(0x13d)](_0x2b185c){const _0x3d66d5=a46_0x168657,_0x7eb790={'uaTAQ':function(_0x489436,_0x69f3a1){return _0x489436===_0x69f3a1;},'qYcOG':function(_0x48c638,_0x3c55e4){return _0x48c638>=_0x3c55e4;},'GhjrC':function(_0x1007d2,_0x5c4f3f){return _0x1007d2<=_0x5c4f3f;},'twBqZ':function(_0x14f4df,_0x44292d){return _0x14f4df===_0x44292d;},'gmjkz':function(_0x3b9fb9,_0x5b2c3b){return _0x3b9fb9===_0x5b2c3b;},'eYxgg':function(_0xfe4f43,_0x5323f8){return _0xfe4f43===_0x5323f8;}},_0x5be2bb='3|11|6|10|0|5|9|12|2|8|1|7|4'[_0x3d66d5(0x105)]('|');let _0x15251b=0x0;while(!![]){switch(_0x5be2bb[_0x15251b++]){case'0':if(_0x2b185c===0x5015)return Equip_1['EquipSlot'][_0x3d66d5(0xfd)];continue;case'1':if(_0x7eb790['uaTAQ'](_0x2b185c,0x526d))return Equip_1['EquipSlot'][_0x3d66d5(0x118)];continue;case'2':if(_0x7eb790[_0x3d66d5(0x13e)](_0x2b185c,0x51a5))return Equip_1[_0x3d66d5(0x108)]['Pants'];continue;case'3':if(_0x7eb790[_0x3d66d5(0x116)](_0x2b185c,0x4e85)&&_0x7eb790[_0x3d66d5(0x12f)](_0x2b185c,0x4e89))return Equip_1[_0x3d66d5(0x108)][_0x3d66d5(0x143)];continue;case'4':return undefined;case'5':if(_0x2b185c===0x5079)return Equip_1['EquipSlot']['Arm'];continue;case'6':if(_0x7eb790['uaTAQ'](_0x2b185c,0x4f4d))return Equip_1[_0x3d66d5(0x108)][_0x3d66d5(0x109)];continue;case'7':if(_0x7eb790[_0x3d66d5(0x126)](_0x2b185c,0x52d1))return Equip_1[_0x3d66d5(0x108)]['RingLeft'];continue;case'8':if(_0x7eb790['gmjkz'](_0x2b185c,0x5209))return Equip_1[_0x3d66d5(0x108)]['Shoes'];continue;case'9':if(_0x7eb790[_0x3d66d5(0x122)](_0x2b185c,0x50dd))return Equip_1[_0x3d66d5(0x108)][_0x3d66d5(0x11a)];continue;case'10':if(_0x7eb790[_0x3d66d5(0x126)](_0x2b185c,0x4fb1))return Equip_1[_0x3d66d5(0x108)][_0x3d66d5(0x106)];continue;case'11':if(_0x7eb790[_0x3d66d5(0x122)](_0x2b185c,0x4ee9))return Equip_1[_0x3d66d5(0x108)][_0x3d66d5(0x139)];continue;case'12':if(_0x7eb790['eYxgg'](_0x2b185c,0x5141))return Equip_1['EquipSlot'][_0x3d66d5(0x12b)];continue;}break;}}[a46_0x168657(0x129)](_0x350552){return GameConfigMgr_1['g_gameConfigMgr']['EquipTpl'][_0x350552];}[a46_0x168657(0x131)](_0x43cbd2,_0x4e482c){const _0x231212=a46_0x168657,_0xbf41d2={'IVRDc':function(_0x6f25e0,_0xd6e66){return _0x6f25e0!==_0xd6e66;},'AkuEJ':function(_0x3d6672,_0x32135c){return _0x3d6672===_0x32135c;},'PVgOe':function(_0x4cb47a,_0x10733d){return _0x4cb47a===_0x10733d;},'VvDwt':function(_0x2a6003,_0x45d3bb){return _0x2a6003-_0x45d3bb;}};var _0x1ba89e,_0x2cdeff;return _0xbf41d2[_0x231212(0x102)](_0x2cdeff=_0xbf41d2[_0x231212(0x13b)](_0x1ba89e=this[_0x231212(0x129)](_0x43cbd2),null)||_0xbf41d2[_0x231212(0x138)](_0x1ba89e,void 0x0)?void 0x0:_0x1ba89e[_0x231212(0x13a)][_0xbf41d2[_0x231212(0x117)](_0x4e482c,0x1)],null)&&_0xbf41d2[_0x231212(0x102)](_0x2cdeff,void 0x0)?_0x2cdeff:0x0;}['testGenerateEquip'](){const _0x3c0713=a46_0x168657,_0x12a6e3=GameConfigMgr_1['g_gameConfigMgr'][_0x3c0713(0x12a)][_0x3c0713(0xfa)],_0x1531f=_0x12a6e3[_0x3c0713(0x133)],_0x217746=GameConfigMgr_1[_0x3c0713(0x104)][_0x3c0713(0xfb)][_0x1531f],_0x5827d2=GameConfigMgr_1[_0x3c0713(0x104)][_0x3c0713(0x11d)][_0x217746[_0x3c0713(0x10c)]],_0x145214=_0x5827d2[Math[_0x3c0713(0x121)](Math[_0x3c0713(0x110)]()*_0x5827d2[_0x3c0713(0x100)])][_0x3c0713(0x113)],_0x8a6e8e=this[_0x3c0713(0xfc)](0x1,_0x145214,_0x12a6e3['MapId'],_0x12a6e3[_0x3c0713(0x12d)]);return _0x8a6e8e;}}exports[a46_0x168657(0x111)]=EquipMgr,exports['g_equipMgr']=SingleFactory_1['SingleFactory']['getInstance'](EquipMgr);function a46_0x363f(){const _0x3faf32=['floor','gmjkz','stringify','defineProperty','getEquipQualityByAdvLvl','twBqZ','5210WDUWuR','EquipId','getEquipCfg','Map','Waist','getRandomItem','DropId','toString','GhjrC','./AffixFactory','getPrice','3260712rVuqRO','MonsterSpawnId','2180gAwdtd','427653fKdmKT','../../../core/base/SingleBase','\x20词缀数量\x20','PVgOe','Offhand','Price','AkuEJ','../../../core/manager/SingleFactory','getEquipSlotByType','uaTAQ','8ITxruN','getEquipTpl','EquipType','SingleBase','Weapon','5253qEjPRa','g_logger','100001','MonsterSpawn','generateEquip','Chest','\x20等级\x20','g_affixFactory','length','275AHiufI','IVRDc','mongodb','g_gameConfigMgr','split','Shoulder','g_dropService','EquipSlot','Head','\x20词缀\x20','5299755VJkbcr','MonGroupId','43DehuRg','g_equipFactory','info','random','EquipMgr','8444AUzzCO','MonsterId','../../../gameConfig/GameConfigMgr','\x20需求等级\x20','qYcOG','VvDwt','Necklace','g_equipMgr','Hand','ObjectId','__esModule','MonsterSpawnMonsterGroup','../../../shared/interface/equip/Equip','6979616MFIZjU','calcEquipLevel'];a46_0x363f=function(){return _0x3faf32;};return a46_0x363f();}